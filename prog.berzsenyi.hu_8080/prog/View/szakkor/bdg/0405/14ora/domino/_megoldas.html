<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >

<html xmlns="http://www.w3.org/1999/xhtml"> 
    
<!-- Mirrored from prog.berzsenyi.hu:8080/prog/View/szakkor/bdg/0405/14ora/domino/_megoldas by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 07 Aug 2012 20:12:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
<head>
        <title>Informatika gyűjtemény</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        


<script type="text/javascript" src="../../../../../../js/tatab.js" ></script>
    

<script type="text/javascript">
    
    window.onload = function() {

        

        return true;
    }
</script>

    <script type="text/javascript" src="../../../../../../js/latex/LaTeXMathML.js" ></script>

        



<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../../../css/system/unsorted.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../../../css/system/tables.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../../../css/common/view.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../../../css/common/doc.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../../../css/common/doc.lists.css"/>


<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../../../css/screen/doc.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../../../css/screen/view.css"/>



        

    </head>
    <body>
        
            
            
                <div id="leftdiv">
                    







<div id="maintitle">
    <a href="../../../../../index.html" class="maintitle">
        Informatika gyűjtemény
    </a>
</div>

<div id="leftpanel">
    



<div id="favlinks">
    <a href="../../../../../index.html">Főoldal</a> |
    <a href="../../../1011.html">Algoritmus szakkör</a>
    <br />
    <a href="../../../../../doku/info/articles.html">Cikkek</a> | 
    <a href="../../../../../verseny/nttv/00table.html">Feladatok</a> |
    <a href="../../../../../doku/info/projects.html">Projektek</a>
    <br />
    <a href="../../../../../doku/info/contr.html">Készítők</a> |
    <a href="../../../../../doku/info/links.html">Linkek</a>
</div>

    <div id="seacrhbox">
        <form action="http://prog.berzsenyi.hu:8080/prog/Search/szakkor/bdg/0405/14ora/domino/_megoldas" method="post" accept-charset="UTF-8">
            <div style="text-align:left;">
                <input type="text" id="searchbox" name="stitle" value="" /><br />
            </div>
            <div style="text-align: right;">
                <input type="submit" name="submit" value="Keres" />
                <input type="submit" name="submit" value="Töröl" />
            </div>
        </form>
    </div>
    
    









    <div id="contextmenu">
        








        
            
                <a href="../domino.html">
                    <img src="../../../../../../img/up.png" alt="Egy szinttel feljebb" class="uparrow_active" />                    
                </a>
            
            
        
        <b><a href="_megoldas.html">Megoldás</a></b><br />
        
            <p class="tabhead">
<a href="../../../0405.html" class="tab_selected">2004</a><a href="../../../0506.html" class="tab_normal">05</a><a href="../../../0607.html" class="tab_normal">06</a><a href="../../../0708.html" class="tab_normal">07</a><a href="../../../0809.html" class="tab_normal">08</a><a href="../../../0910.html" class="tab_normal">09</a><a href="../../../1011.html" class="tab_normal">10</a></p>
            <div class="subnav">
                <div class="docpanel">
                    <script type="text/JavaScript">
//<![CDATA[
    function menu_orak_jumpto(selObj) {
        if (selObj.selectedIndex == 1) {
            window.location = '/prog/Resolve?node=4';
        }
        if (selObj.selectedIndex == 2) {
            window.location = '/prog/Resolve?node=2012';
        }
        if (selObj.selectedIndex == 3) {
            window.location = '/prog/Resolve?node=2014';
        }
        if (selObj.selectedIndex == 4) {
            window.location = '/prog/Resolve?node=2016';
        }
        if (selObj.selectedIndex == 5) {
            window.location = '/prog/Resolve?node=2017';
        }
        if (selObj.selectedIndex == 6) {
            window.location = '/prog/Resolve?node=24';
        }
        if (selObj.selectedIndex == 7) {
            window.location = '/prog/Resolve?node=25';
        }
        if (selObj.selectedIndex == 8) {
            window.location = '/prog/Resolve?node=2020';
        }
        if (selObj.selectedIndex == 9) {
            window.location = '/prog/Resolve?node=2021';
        }
        if (selObj.selectedIndex == 10) {
            window.location = '/prog/Resolve?node=2022';
        }
        if (selObj.selectedIndex == 11) {
            window.location = '/prog/Resolve?node=2023';
        }
        if (selObj.selectedIndex == 12) {
            window.location = '/prog/Resolve?node=2024';
        }
        if (selObj.selectedIndex == 13) {
            window.location = '/prog/Resolve?node=2025';
        }
        if (selObj.selectedIndex == 14) {
            window.location = '/prog/Resolve?node=2026';
        }
    }
//]]>
</script>
<div style="text-align: center;"><table class="aligner"><tr class="aligner"><td class="aligner" style="text-align: left; width: 10%; ">
<a href="JavaScript:menu_orak_jumpBw()">&lt;&lt;</a>&nbsp;</td><td class="aligner" style="text-align: center; width: 80%; ">
<b><a href="../../14ora.html">14. óra</a></b></td><td class="aligner" style="text-align:right; width: 10%;">
&nbsp;&gt;&gt;</td></tr></table>
<form action="http://prog.berzsenyi.hu:8080/prog/View/szakkor/bdg/0405/14ora/domino/not_implemented_action" method="get"><div><select style="width: 190px;" name="node" id="menu_orak" onchange="JavaScript:menu_orak_jumpto(this)"><option>--&gt;LISTA</option><option  value="4">1. óra</option><option  value="2012">2. óra</option><option  value="2014">3. óra</option><option  value="2016">4. óra</option><option  value="2017">5. óra</option><option  value="24">6. óra</option><option  value="25">7. óra</option><option  value="2020">8. óra</option><option  value="2021">9. óra</option><option  value="2022">10. óra</option><option  value="2023">11. óra</option><option  value="2024">12. óra</option><option  value="2025">13. óra</option><option  selected="selected"  value="2026">14. óra</option></select><br /></div><script type="text/JavaScript">
//<![CDATA[
menu_orak_selObj = document.getElementById("menu_orak");
    function menu_orak_jumpFw() {
        i = menu_orak_selObj.selectedIndex;
	if (i < 14) {
            menu_orak_selObj.selectedIndex = i+1;
            menu_orak_jumpto(menu_orak_selObj);
	}
    }
    function menu_orak_jumpBw() {
        i = menu_orak_selObj.selectedIndex;
        if (i > 1) {
            menu_orak_selObj.selectedIndex = i-1;
            menu_orak_jumpto(menu_orak_selObj);
        }
    }
//]]>
</script>
<noscript><div><input type="submit" value="Ugrás" /></div></noscript></form></div>
                    <script type="text/JavaScript">
//<![CDATA[
    function menu_feladatok_jumpto(selObj) {
        if (selObj.selectedIndex == 1) {
            window.location = '/prog/Resolve?node=8';
        }
        if (selObj.selectedIndex == 2) {
            window.location = '/prog/Resolve?node=46';
        }
        if (selObj.selectedIndex == 3) {
            window.location = '/prog/Resolve?node=45';
        }
        if (selObj.selectedIndex == 4) {
            window.location = '/prog/Resolve?node=10';
        }
        if (selObj.selectedIndex == 5) {
            window.location = '/prog/Resolve?node=40';
        }
        if (selObj.selectedIndex == 6) {
            window.location = '/prog/Resolve?node=41';
        }
        if (selObj.selectedIndex == 7) {
            window.location = '/prog/Resolve?node=27';
        }
        if (selObj.selectedIndex == 8) {
            window.location = '/prog/Resolve?node=42';
        }
        if (selObj.selectedIndex == 9) {
            window.location = '/prog/Resolve?node=28';
        }
        if (selObj.selectedIndex == 10) {
            window.location = '/prog/Resolve?node=6';
        }
        if (selObj.selectedIndex == 11) {
            window.location = '/prog/Resolve?node=16';
        }
        if (selObj.selectedIndex == 12) {
            window.location = '/prog/Resolve?node=7';
        }
        if (selObj.selectedIndex == 13) {
            window.location = '/prog/Resolve?node=29';
        }
        if (selObj.selectedIndex == 14) {
            window.location = '/prog/Resolve?node=44';
        }
        if (selObj.selectedIndex == 15) {
            window.location = '/prog/Resolve?node=32';
        }
        if (selObj.selectedIndex == 16) {
            window.location = '/prog/Resolve?node=32';
        }
        if (selObj.selectedIndex == 17) {
            window.location = '/prog/Resolve?node=33';
        }
    }
//]]>
</script>
<div style="text-align: center;"><table class="aligner"><tr class="aligner"><td class="aligner" style="text-align: left; width: 10%; ">
<a href="JavaScript:menu_feladatok_jumpBw()">&lt;&lt;</a>&nbsp;</td><td class="aligner" style="text-align: center; width: 80%; ">
<b><a href="../domino.html">Dominó</a></b></td><td class="aligner" style="text-align:right; width: 10%;">
&nbsp;<a href="JavaScript:menu_feladatok_jumpFw()">&gt;&gt;</a></td></tr></table>
<form action="http://prog.berzsenyi.hu:8080/prog/View/szakkor/bdg/0405/14ora/domino/not_implemented_action" method="get"><div><select style="width: 190px;" name="node" id="menu_feladatok" onchange="JavaScript:menu_feladatok_jumpto(this)"><option>--&gt;LISTA</option><option  value="8">Célérték keresés</option><option  selected="selected"  value="46">Dominó</option><option  value="45">Építkezés</option><option  value="10">Fazekas</option><option  value="40">Folyók</option><option  value="41">Karaván</option><option  value="27">Kemence</option><option  value="42">Kép</option><option  value="28">Malac</option><option  value="6">Partíció probléma</option><option  value="16">Számolós</option><option  value="7">Szorzattá bontás</option><option  value="29">Teher-fuvar</option><option  value="44">Ütemezés</option><option  value="32">Útvesztő-generálás</option><option  value="32">Útvesztő-generálás</option><option  value="33">Zombik</option></select><br /></div><script type="text/JavaScript">
//<![CDATA[
menu_feladatok_selObj = document.getElementById("menu_feladatok");
    function menu_feladatok_jumpFw() {
        i = menu_feladatok_selObj.selectedIndex;
	if (i < 17) {
            menu_feladatok_selObj.selectedIndex = i+1;
            menu_feladatok_jumpto(menu_feladatok_selObj);
	}
    }
    function menu_feladatok_jumpBw() {
        i = menu_feladatok_selObj.selectedIndex;
        if (i > 1) {
            menu_feladatok_selObj.selectedIndex = i-1;
            menu_feladatok_jumpto(menu_feladatok_selObj);
        }
    }
//]]>
</script>
<noscript><div><input type="submit" value="Ugrás" /></div></noscript></form></div>
                </div>
            </div>
        
        
            <div id="navpanel">
                <a href="../../14ora.html">14. óra</a><br />
                
                    <a href="../domino.html">Dominó</a>
                    
                    
                        (<a href="_megoldas.html">M.</a>)
                     <br />
                
            </div>
                
        
        
            <ul>
                
                    <li>
                        <a href="_megoldas/fg_dom.html">fg_dom.dpr</a>
                    </li>
                
                    <li>
                        <a href="_megoldas/fg_dom-2.html">fg_dom.pas</a>
                    </li>
                
                    <li>
                        <a href="_megoldas/tb_dom.html">tb_dom.cs</a>
                    </li>
                
            </ul>     
        
    </div>


    




    



    <!-- <a href="?page=admin&amp;a=/">Admin</a> -->
</div>

                </div>
                <!-- RIGHT -->
                <div id="rightdiv">
                    



 
 

    <p class="tabhead">
<a href="_megoldas.html" class="tab_selected_white">Nézet</a><a href="_megoldasd067.html?page=print" class="tab_normal">Nyomtat</a></p>
<div id="rightbase">    
    






    <div id="navbar">
        








        
            
                <a href="../domino.html">
                    <img src="../../../../../../img/up.png" alt="Egy szinttel feljebb" class="uparrow_active" />                    
                </a>
            
            
        
        
            
                
                
                    
                        
                            
                        
                        
                    
                    
                    <a href="../../../../../../View.html">Főoldal</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="../../../../../szakkor.html">Szakkörök</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="../../../../bdg.html">BDG Szakkör</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="../../../0405.html">2004/2005</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="../../14ora.html">14. óra</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="../domino.html">Dominó</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="_megoldas.html">Megoldás</a>
                
            
            
        
    </div> <!-- navbar -->
    


    


 


    

    
    
        
              
        
            
            
            
            
            
                
                
                
                
                    







    
        







<div class="docnav">
    <b>
        
        
            
                
                <a href="../domino.html">Dominó</a> (<a href="_megoldas.html">Megoldás</a>)
            
            
        

    </b>

    <br />
    
        
            
            
                
                
                
            
                
                
                <a href="../../../../../szakkor.html">Szakkörök</a>
            
                
                &gt;
                <a href="../../../../bdg.html">BDG Szakkör</a>
            
                
                &gt;
                <a href="../../../0405.html">2004/2005</a>
            
                
                &gt;
                <a href="../../14ora.html">14. óra</a>
            
            <br />
        
    
        
            
            
                
                
                
            
                
                
                <a href="../../../../../cimkek.html">Címkék</a>
            
                
                &gt;
                <a href="../../../../../cimkek/feladat.html">Feladat</a>
            
            <br />
        
    
        
            
            
                
                
                
            
                
                
                <a href="../../../../../verseny.html">Versenyek</a>
            
                
                &gt;
                <a href="../../../../../verseny/nttv.html">Nemes Tihamér OKSzTV</a>
            
                
                &gt;
                <a href="../../../../../verseny/nttv/2000.html">2000</a>
            
                
                &gt;
                <a href="../../../../../verseny/nttv/2000/ford3.html">Döntő</a>
            
                
                &gt;
                <a href="../../../../../verseny/nttv/2000/ford3/kat3.html">11-13. osztály</a>
            
            <br />
        
    
</div>



<div class="docpanel">
    <div class="document">
        
            
            


                    
                        
                        
                            
<h2>A probléma vizsgálata</h2>
<div class="paragraph">
Egy dominósor végei alatt a sorozat két végén lévő fél-dominókon lévő pöttyök számát fogjuk értnei...
</div>
<div class="paragraph">
<i>Ez a nagyfejezet innentől nem feltétlenül kell a megoldás megértéséhez.</i>
</div>
<h3>Sebesség</h3>
<div class="paragraph">
Nézzük meg először a minden lehetőséget végignéző, rekurzív back-track eljárást. 
Legyen a <span class="codetext">Leghosszabb(a, b, i)</span> egy olyan függvény, ami megadja, hogy ha Mohó Marci az <span class="codetext">i.</span> dominónál tart, és a kirakott dominósor egyik végén <span class="codetext">a</span> db. pötty van, a másikon pedig <span class="codetext">b</span> db, akkor milyen hosszú lehet a kirakott dominósor lehető leghosszabb kiegészítése. Így a megoldás értéke <span class="codetext">Leghosszabb(domino1[1], domino2[1], 2)</span> lesz, ahol <span class="codetext">domino1[i]</span> az <span class="codetext">i.</span> dominó egyik vége, <span class="codetext">domino2[i]</span> pedig a másik vége. (A dominón lévő pöttyök számáról van szó természetesen.)
</div>
<div class="paragraph">
A <span class="codetext">Leghosszabb(a, b, i)</span> eljárást úgy lehet pl. megírni, hogy önmaga meghívásának a segítségével kiválasztja, hogy az <span class="codetext">i.</span> dominó <span class="codetext">a-b</span> sorhoz való illesztései közül melyik adja a leghosszabb folytatást, és hozzáad egyet. A visszatérési érék pedig lehet ez a kapott hossz, vagy az abban az esetben adódó folytatás hossza, amikor az <span class="codetext">i.</span> dominó nem kerül illesztésre, attól függően, hogy melyik érték a nagyobb.
</div>
<div class="code codetext"><style>.metahun_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.metahun_user_type {
color: #0095ff;  font-weight: bold;
}
.metahun_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.metahun_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.metahun_type {
color: rgb(128,0,0);
}
.metahun_operator {
color: rgb(0,0,0);
}
.metahun_char_literal {
color: rgb(255,0,255);
}
.metahun_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.metahun_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.metahun_num_literal {
color: rgb(0,0,255);
}
.metahun_comment {
color: rgb(147,147,147);  
}
.metahun_plain {
color: rgb(0,0,0);
}
.metahun_string_literal {
color: rgb(255,0,0);
}
.metahun_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="metahun_keyword">Elj&aacute;r&aacute;s</span><span class="metahun_plain">&#160;Leghosszabb</span><span class="metahun_separator">(</span><span class="metahun_plain">a</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;b</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_separator">)</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">Ha</span><span class="metahun_plain">&#160;i&#160;</span><span class="metahun_operator">&gt;</span><span class="metahun_plain">&#160;N&#160;</span><span class="metahun_keyword">Akkor</span><span class="metahun_plain">&#160;Leghosszabb&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">0</span><span class="metahun_separator">;</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">K&uuml;l&ouml;nben</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;x&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;domino1</span><span class="metahun_separator">[</span><span class="metahun_plain">i</span><span class="metahun_separator">];</span><span class="metahun_plain">&#160;y&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;domino2</span><span class="metahun_separator">[</span><span class="metahun_plain">i</span><span class="metahun_separator">];</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;h1&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">0</span><span class="metahun_separator">;</span><span class="metahun_plain">&#160;h2&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">0</span><span class="metahun_separator">;</span><span class="metahun_plain">&#160;h3&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">0</span><span class="metahun_separator">;</span><span class="metahun_plain">&#160;h4&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">0</span><span class="metahun_separator">;</span><span class="metahun_plain">&#160;h5&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">0</span><span class="metahun_separator">;</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">Ha</span><span class="metahun_plain">&#160;x&#160;</span><span class="metahun_operator">=</span><span class="metahun_plain">&#160;a&#160;</span><span class="metahun_keyword">Akkor</span><span class="metahun_plain">&#160;h1&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">1</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">+</span><span class="metahun_plain">&#160;Leghosszabb</span><span class="metahun_separator">(</span><span class="metahun_plain">y</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;b</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_num_literal">+1</span><span class="metahun_separator">);</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">Ha</span><span class="metahun_plain">&#160;y&#160;</span><span class="metahun_operator">=</span><span class="metahun_plain">&#160;a&#160;</span><span class="metahun_keyword">Akkor</span><span class="metahun_plain">&#160;h2&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">1</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">+</span><span class="metahun_plain">&#160;Leghosszabb</span><span class="metahun_separator">(</span><span class="metahun_plain">x</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;b</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_num_literal">+1</span><span class="metahun_separator">);</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">Ha</span><span class="metahun_plain">&#160;x&#160;</span><span class="metahun_operator">=</span><span class="metahun_plain">&#160;b&#160;</span><span class="metahun_keyword">Akkor</span><span class="metahun_plain">&#160;h3&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">1</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">+</span><span class="metahun_plain">&#160;Leghosszabb</span><span class="metahun_separator">(</span><span class="metahun_plain">y</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;a</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_num_literal">+1</span><span class="metahun_separator">);</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">Ha</span><span class="metahun_plain">&#160;y&#160;</span><span class="metahun_operator">=</span><span class="metahun_plain">&#160;b&#160;</span><span class="metahun_keyword">Akkor</span><span class="metahun_plain">&#160;h4&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">1</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">+</span><span class="metahun_plain">&#160;Leghosszabb</span><span class="metahun_separator">(</span><span class="metahun_plain">x</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;a</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_num_literal">+1</span><span class="metahun_separator">);</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;h5&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;Leghosszabb</span><span class="metahun_separator">(</span><span class="metahun_plain">a</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;b</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_num_literal">+1</span><span class="metahun_separator">);</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Leghosszabb&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;Maximum</span><span class="metahun_separator">(</span><span class="metahun_plain">h1</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;h2</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;h3</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;h4</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;h5</span><span class="metahun_separator">);</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">El&aacute;gaz&aacute;s</span><span class="metahun_plain">&#160;</span><span class="metahun_keyword">V&eacute;ge</span><span class="metahun_plain"></span><br /><span class="metahun_keyword">Elj&aacute;r&aacute;s</span><span class="metahun_plain">&#160;</span><span class="metahun_keyword">V&eacute;ge</span><span class="metahun_plain"></span><br /></div>
<div class="paragraph">
Ez a rekurzió <span class="mathspan">$100,000$</span> szintes is lehet, szintenként <span class="codetext">1</span> és <span class="codetext">5</span> közötti irányba ágazik, és minden ágon lemegy a legalsó szintig. (A felső határ valójában <span class="codetext">5</span> helyett <span class="codetext">3</span>, ha megírjuk, hogy azonos dominósorok hosszát ne kérdezze le többször.) A szükséges lépések száma viszont így valamilyen <span class="mathspan">$x^{100000}$</span> nagyságrendű szám lesz, ahol (<span class="mathspan">$1 \leq x \leq 3$</span>) az elágazások átlagos száma. <span class="mathspan">$x$</span>-et nagyon nehéz lenne normálisan kiszámolni, de nagyobb lesz 1-nél annyival, hogy ez reménytelenül sok legyen. <i>(Jobb becslések?)</i>
</div>
<div class="paragraph">
Segíthetünk viszont algoritmusunkon a feljegyzéses módszerrel: felveszünk egy <span class="codetext">10</span>-szer <span class="codetext">10</span>-szer <span class="codetext">100,000</span>-es <span class="codetext">cache[a, b, i]</span> tömböt, amibe minig eltároljuk ez eljárás lefutásának az eredményét, tehát egy paraméter-kombinációra már csak egyszer fog lefutni. Így már legfeljebb csak <span class="mathspan">$10 * 10 * 100,000 = 10,000,000$</span> lépésre lesz szükség, és ez már vállalható. A <span class="codetext">cache[]</span> tömbnek viszon dominósor-hosszakat kell tárolni, amik <span class="codetext">0</span> és <span class="codetext">100,000</span> közti számok lehetnek, amiket valószínűleg <span class="codetext">4</span> bájtos változókban fogunk tárolni, de legalább is <span class="codetext">7</span>-bitesekben. Ez így már 20-40 megabájt lefoglalt memóriát jelent, ami nagyon sok. (A szükséges verem-területről nem is beszélve.) De vizsgáljuk meg a memória-problémát kicsit közelebbről is...
</div>
<h3>Memória</h3>
<div class="paragraph">
A programnak legrosszabb esetben akár <span class="codetext">N = 100.000</span> dominó kezelésére is fel kell készülnie. Egy dominót két <span class="codetext">0</span> és <span class="codetext">9</span> közötti számmal írhatunk le. Normális esetben ezt két bájtban tennénk meg, de így körülbelül <span class="codetext">200</span> kilbájtot foglalna el a programunk. Tudjuk viszont, hogy ezeken a versenyeken a megoldások-programoknak általában 64 kilobájtba is be kell férniük. Próbálkozhatunk ügyesebb tárolással is: számoljuk össze, hogy hányféle dominó létezik: <span class="mathspan">$10+\frac{10 \times 9}{2} = 55$</span>, mert van <span class="mathspan">$10$</span> darab dupla, a nem dupláknak pedig az egyik fele <span class="mathspan">$10$</span> féle lehet, a másik pedig csak <span class="mathspan">$9$</span>, de így kétszer számoltuk az ilyeneket. Így ha minden dominóhoz egy <span class="codetext">0</span> és <span class="codetext">54</span> közti számot rendelünk, akkor a dominók tárolhatóak <span class="codetext">5</span> biten, mert <span class="mathspan">$2^5 = 64 > 54$</span>. Így a <span class="codetext">100,000</span> dominó egyidejű tárolásához elegendő <span class="codetext">5 * 100.000 bit = 62.500 bájt</span>. Ne feledjük, hogy ez egy nagyon bonyolult tárolási módszer. Ha így akarnánk tárolni a dominókat, akkor bitenkénti műveleteket kéne használnunk és írnunk kéne egy <span class="codetext">GetDomino(i)</span> és egy <span class="codetext">SetDomino(i)</span> függvényt külön arra, hogy az i-edik dominót lekérdezzük, vagy felírjuk! OKTV-n és Nemes Tihaméron legtöbbször létezni szokott ennél egyszerűbb megoldás is. Ez tehát valószínűleg egy olyan megoldás lesz, ami nem tárolja egyszerre a memóriában az összes dominót...
</div>
<h2>Egy "olyan" megoldás</h2>
<h3>Bevezető</h3>
<div class="paragraph">
A rekurzív és a feljegyzéses megoldás mindkettő olyan volt, hogy meg tudták állapítani a legjobb dominósort is. (A rekurzívban kicsit több paramétert kellene átadni, hogy a legalsó szinten is meglegyenek a hosszak, és ott egy maximumkiválasztást csinálni. A feljegyzésesben még többet kellene trükközni...) Maga a dominósor viszont nem kell a feladathoz, úgyhogy lehet remény sokkal egyszerűbb megoldásokra is.
</div>
<h3>Az algoritmus</h3>
<div class="paragraph">
Vegyünk fel egy képzeletbeli tömböt, ami az algoritmus lefutása utánn minden kezdés-végződés számkombinációhoz tárolni fogja a kirakható lehetséges leghosszabb, olyan kezdésű és végződésű dominósor hosszát. Pl. <span class="codetext">hosszak[1, 4] = hosszak[4, 1]</span> a Mohó Marci dominóiból a szabályok szerint kirakható, leghosszabb <span class="codetext">1</span>-el kezdődő és <span class="codetext">4</span>-re végződő dominósor hossza. (Ha egy ilyen dominósort sem lehet kirakni, akkor legyen pl. <span class="codetext">hosszak[1, 4] = 0</span>!) Ha egy ilyen tömböt fel tudnánk építeni, akkor ennek a legnagyobb eleme lenne a megoldás, és még a leghosszabb dominósor végein lévő pöttyök számát is meg tudnánk határozni.
</div>
<div class="paragraph">
<u>A tömb felépítése</u>: a dominókat sorban fogjuk beolvasni, és úgy építjük fel fokozatosan a tömböt. Kezdetben minden eleme nulla, utána pedig minden dominó beolvasása után az addig beolvasott dominók felhasználásával kirakható leghosszabb sorok hosszait fogja tárolni.
Az első dominó beolvasása után még csak egyetlen sorozatnál nem nulla a tömb. Ha a dominó pl. <span class="codetext">5-6</span> alakú volt, akkor <span class="codetext">hosszak[5, 6] = 1</span>. (És <span class="codetext">hosszak[6, 5]</span>-nél is <span class="codetext">1</span>, de ezt mostantól nem fogjuk jelölni.) Ha a második dominó pl. <span class="codetext">6-7</span> alakú, akkor a <span class="codetext">hosszak[5, 6] = 1</span> mellé bekerül egy <span class="codetext">hosszak[5, 7] = 2</span> is. És így tovább: az összes új dominót megpróbáljuk illeszteni a meglévő dominósorokhoz, és ha így új dominósor jönne létre, akkor azt bejegyezzük a tömbbe, eggyel nagyobb hosszal, mint az a sor, amiből létrehoztuk. Ha viszont már létezik ugyanolyan végű dominósor, mint ami létrejött, akkor az új és a régi közül a hosszabbat tartjuk meg és tesszük be a tömbbe.
</div>
<h3>Megvalósítás</h3>
<div class="paragraph">
A dominókat sorban olvasuk be, és mindig meghívunk egy <span class="codetext">Betesz(a, b)</span> eljárást, ahol <span class="codetext">a-b</span> a beolvasott dominó két száma. Az új dominó beillesztésénél arra kell figyelni, hogy lehetséges, hogy többféleképpen, több meglévő dominósorhoz is hozzá lehet majd illeszteni. Az is lehetséges, hogy egy már önmaga felhasználásával létrehozott sorhoz is hozzá lehetne még egyszer illeszteni. Ennek elkerülésére egy <span class="codetext">ujhossz[]</span> tömböt fogunk használni: <span class="codetext">Betesz(a, b)</span> eljárásnak a következő dolgokat kell csinálnia:
</div>
<ul>
<li>Minden hosszt átmásol a <span class="codetext">hossz[]</span> tömbből az <span class="codetext">ujhossz[]</span> tömbbe.</li>
<li>Megnézni, hogy hogyan lehet a <span class="codetext">hossz[]</span>-ban tárolt sorokhoz hozzáilleszteni az adott dominót, és ha talál illeszkedést, akkor a létrejövő új sorok hosszait már az <span class="codetext">ujhossz[]</span>-ban lévő hosszakkal veti össze, és oda is másolja be őket, ha nagyobbak.</li>
<li>Miután minden lehetőséget végignézett, visszamásolja az <span class="codetext">ujhossz[]</span> tömböt a <span class="codetext">hossz[]</span> tömbbe.</li>
</ul>
<div class="code codetext"><style>.metahun_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.metahun_user_type {
color: #0095ff;  font-weight: bold;
}
.metahun_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.metahun_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.metahun_type {
color: rgb(128,0,0);
}
.metahun_operator {
color: rgb(0,0,0);
}
.metahun_char_literal {
color: rgb(255,0,255);
}
.metahun_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.metahun_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.metahun_num_literal {
color: rgb(0,0,255);
}
.metahun_comment {
color: rgb(147,147,147);  
}
.metahun_plain {
color: rgb(0,0,0);
}
.metahun_string_literal {
color: rgb(255,0,0);
}
.metahun_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="metahun_keyword">Elj&aacute;r&aacute;s</span><span class="metahun_plain">&#160;Betesz</span><span class="metahun_separator">(</span><span class="metahun_plain">a</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;b</span><span class="metahun_separator">)</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;ujhossz&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;hossz</span><span class="metahun_separator">;</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">Ciklus</span><span class="metahun_plain">&#160;i&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">0</span><span class="metahun_operator">-</span><span class="metahun_plain">t&oacute;l&#160;</span><span class="metahun_num_literal">9</span><span class="metahun_operator">-</span><span class="metahun_plain">ig</span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">Ha</span><span class="metahun_plain">&#160;</span><span class="metahun_separator">(</span><span class="metahun_plain">hossz</span><span class="metahun_separator">[</span><span class="metahun_plain">a</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_separator">]</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">&gt;</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">0</span><span class="metahun_separator">)</span><span class="metahun_plain">&#160;</span><span class="metahun_keyword">&eacute;s</span><span class="metahun_plain">&#160;</span><span class="metahun_separator">(</span><span class="metahun_plain">hossz</span><span class="metahun_separator">[</span><span class="metahun_plain">a</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_separator">]</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">+</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">1</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">&gt;</span><span class="metahun_plain">&#160;ujhossz</span><span class="metahun_separator">[</span><span class="metahun_plain">b</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_separator">])</span><span class="metahun_plain">&#160;</span><span class="metahun_keyword">Akkor</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ujhossz</span><span class="metahun_separator">[</span><span class="metahun_plain">b</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_separator">]</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;hossz</span><span class="metahun_separator">[</span><span class="metahun_plain">a</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_separator">]</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">+</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">1</span><span class="metahun_separator">;</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ujhossz</span><span class="metahun_separator">[</span><span class="metahun_plain">i</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;b</span><span class="metahun_separator">]</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;hossz</span><span class="metahun_separator">[</span><span class="metahun_plain">a</span><span class="metahun_separator">,</span><span class="metahun_plain">&#160;i</span><span class="metahun_separator">]</span><span class="metahun_plain">&#160;</span><span class="metahun_operator">+</span><span class="metahun_plain">&#160;</span><span class="metahun_num_literal">1</span><span class="metahun_separator">;</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">El&aacute;gaz&aacute;s</span><span class="metahun_plain">&#160;</span><span class="metahun_keyword">V&eacute;ge</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="metahun_comment">{...illesztes&#160;a&#160;b&#160;veggel...&#160;}</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;</span><span class="metahun_keyword">Ciklus</span><span class="metahun_plain">&#160;</span><span class="metahun_keyword">V&eacute;ge</span><span class="metahun_plain"></span><br /><span class="metahun_plain">&#160;&#160;&#160;&#160;hossz&#160;</span><span class="metahun_operator">:=</span><span class="metahun_plain">&#160;ujhossz</span><span class="metahun_separator">;</span><span class="metahun_plain"></span><br /><span class="metahun_keyword">Elj&aacute;r&aacute;s</span><span class="metahun_plain">&#160;</span><span class="metahun_keyword">V&eacute;ge</span><span class="metahun_plain"></span><br /></div>
<div class="paragraph">
Ez a kódrészlet csak az <span class="codetext">a</span> végével próbálja illeszteni a dominót. A <span class="codetext">b</span> végével való illesztés is hasonló. A tömb olvasásánal kihasználjuk, hogy szimmetrikus, ezért az írásnál is figyelnünk kell rá, hogy ez a szimmetria fennmaradjon. Teljes tömböket nem minden nyelven lehet egymásnak értékül adni. Pascalban például csak akkor lehet, ha deklarálunk egy tömb típus és mindkét tömb olyan típusú. Ne felejtsük, hogy az első dominót külön kell berakni. Ha minden dominót feldolgoztunk, akkor már csak a maximális értéket kell megkeresni a <span class="codetext">hossz[]</span> tömbben.
</div>
<h2>Megoldások</h2>
<ul>
<li><a href="_megoldas/fg_dom-2.html">fg_dom.pas</a> (Fehér Gábor, Pascal)</li>
<li><a href="_megoldas/fg_dom.html">fg_dom.dpr</a> (Fehér Gábor, Delphi)</li>
<li><a href="_megoldas/tb_dom.html">tb_dom.cs</a> (Tihanyi Balázs, C#)</li>
</ul>

                        
                        
                    

            
        
    </div>
</div>
    
    

                
                
            
        
    
</div> <!-- rightbase -->
<div id="copyright">
    
        A dokumentum tulajdonosa: Feh&eacute;r G&aacute;bor;
        utolsó módosítás:
        2009-11-07 23:17:55
        (Feh&eacute;r G&aacute;bor)
        <br />
    

        (C) 2004-2010
    <a href="../../../../../doku/info/contr.html" class="copyright">BDG programozás szakkör</a>
    <br /> 
    Powered by 
    <a href="../../../../../doku/info/contr.html" class="copyright">BDG programozás szakkör</a> &amp;
    <a href="../../../../../doku/info/njcms.html" class="copyright">njcms</a>

    v0.5.12
    
        <br /><br />
        <a href="http://validator.w3.org/check?uri=referer">
            <img src="../../../../../../img/valid-xhtml10-blue.png" alt="Valid XHTML 1.0 Transitional" height="31" width="88" />
        </a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer">
            <img style="border: 0pt none ; width: 88px; height: 31px;" src="../../../../../../img/valid-css-blue.png" alt="Valid CSS!" />
        </a>
        <br />
     
    
    
    <br /><br />


</div>
                </div>
            
        

    </body>

<!-- Mirrored from prog.berzsenyi.hu:8080/prog/View/szakkor/bdg/0405/14ora/domino/_megoldas by HTTrack Website Copier/3.x [XR&CO'2010], Tue, 07 Aug 2012 20:13:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>
