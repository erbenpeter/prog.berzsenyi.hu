<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >

<html xmlns="http://www.w3.org/1999/xhtml"> 
    
<!-- Mirrored from prog.berzsenyi.hu:8080/prog/View/doku/info/njcms/javaee?page=list by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 08 Aug 2012 06:25:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
<head>
        <title>Informatika gyűjtemény</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        


<script type="text/javascript" src="../../../../js/tatab.js" ></script>
    

<script type="text/javascript">
    
    window.onload = function() {

        

        return true;
    }
</script>

    <script type="text/javascript" src="../../../../js/latex/LaTeXMathML.js" ></script>

        



<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../css/system/unsorted.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../css/system/tables.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../css/common/view.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../css/common/doc.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../css/common/doc.lists.css"/>


<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../css/screen/doc.css"/>
<link rel="stylesheet" type="text/css" media="screen, print" href="../../../../css/screen/view.css"/>



        

    </head>
    <body>
        
            
            
                <div id="leftdiv">
                    







<div id="maintitle">
    <a href="../../../index.html" class="maintitle">
        Informatika gyűjtemény
    </a>
</div>

<div id="leftpanel">
    



<div id="favlinks">
    <a href="../../../index.html">Főoldal</a> |
    <a href="../../../szakkor/bdg/1011.html">Algoritmus szakkör</a>
    <br />
    <a href="../articles.html">Cikkek</a> | 
    <a href="../../../verseny/nttv/00table.html">Feladatok</a> |
    <a href="../projects.html">Projektek</a>
    <br />
    <a href="../contr.html">Készítők</a> |
    <a href="../links.html">Linkek</a>
</div>

    <div id="seacrhbox">
        <form action="http://prog.berzsenyi.hu:8080/prog/Search/doku/info/njcms/javaee?page=list" method="post" accept-charset="UTF-8">
            <div style="text-align:left;">
                <input type="text" id="searchbox" name="stitle" value="" /><br />
            </div>
            <div style="text-align: right;">
                <input type="submit" name="submit" value="Keres" />
                <input type="submit" name="submit" value="Töröl" />
            </div>
        </form>
    </div>
    
    









    <div id="contextmenu">
        








        
            
                <a href="../njcms2c8f.html?page=list">
                    <img src="../../../../img/up.png" alt="Egy szinttel feljebb" class="uparrow_active" />                    
                </a>
            
            
        
        <b><a href="javaee2c8f.html?page=list">Java EE gyorstalpaló</a></b><br />
        
                
        
        
    </div>


    




    



    <!-- <a href="?page=admin&amp;a=/">Admin</a> -->
</div>

                </div>
                <!-- RIGHT -->
                <div id="rightdiv">
                    



 
 

    <p class="tabhead">
<a href="javaee.html" class="tab_normal">Nézet</a><a href="javaeed067.html?page=print" class="tab_normal">Nyomtat</a></p>
<div id="rightbase">    
    






    <div id="navbar">
        








        
            
                <a href="../njcms2c8f.html?page=list">
                    <img src="../../../../img/up.png" alt="Egy szinttel feljebb" class="uparrow_active" />                    
                </a>
            
            
        
        
            
                
                
                    
                        
                            
                        
                        
                    
                    
                    <a href="../../../../View2c8f.html?page=list">Főoldal</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="../../../doku2c8f.html?page=list">Dokumentumok</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="../../info2c8f.html?page=list">Info</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="../njcms2c8f.html?page=list">njCMS</a>
                
                    
                        
                        &gt;
                    
                    
                    <a href="javaee2c8f.html?page=list">Java EE gyorstalpaló</a>
                
            
            
        
    </div> <!-- navbar -->
    


    


 


    

    
    
        
              
        
            
            
            
            
            
                
                
                
                
                    







    
        







<div class="docnav">
    <b>
        
        
            
            
                
                <a href="javaee2c8f.html?page=list">Java EE gyorstalpaló</a>
                
                
            
        

    </b>

    <br />
    
        
    
</div>



<div class="docpanel">
    <div class="document">
        
            
            


                    
                        
                        
                            
<h1>Java EE nagyongyorstalpaló</h1>
<div class="paragraph">
A következőkben megnézzük egy olyan, egyszerű Java Enterprise Alkalmazás elkészítését, ami azokat a technológiákat használja, mint az njCMS. Azoknak akik ebből akarják a Java EE-t megérteni: <i><b>ez a leírás hiányos és szinte biztos, hogy tartalmaz tárgyi tévedéseket.</b></i>
</div>
<h2>Előkészületek</h2>
<div class="paragraph">
Kell NetBeans. <a href="http://code.google.com/p/njcms/wiki/NetBeans">Részletek itt</a>.
</div>
<h2>Hello Enterprise World</h2>
<div class="paragraph">
Hozz létre egy Enterprise Application-t, default beállításokkal. (Ha szervernek Tomcat-et ajánl, akkor állítsd ét Glassfish V2-re. A Tomcat a Java EE-nek csak a webes rész-API-ját implementálja.)
</div>
<div class="paragraph">
Amint láthatod 3 project jött létre:
</div>
<dl>
<dt>Tutorial</dt><dd>Ez az egész alkalmazás főprojektje, összefogja a következő kettőt.</dd>
<dt>Tutorial-ejb</dt> <dd>Ebben kell megvalósítani az üzleti logikát</dd>
<dt>Tutorial-war</dt>
<dd>Ebben kell megvalósítani a webes user interfészt, servletekkel, jsp-vel, stb. Ez olyan mint a tomcat-ből is ismert sima webes projektek, azzal a különbséggel, hogy a Tutorial-ejb szolgáltatásait használja fel.</dd>
</dl>
<div class="paragraph">
Az így készülő alkalmazások a háromrétegű architektúrát fogják követni: adatbázis, üzleti logika, user interfész. Az üzleti logika végez minden adatbázis-műveletet, tehát elfedi az adatbázist az user-interfész elől, felel az adatbázisban lévő adatok konzisztenciájáért. A user interfész tehát a felhasználóval és az üzleti logikával lesz közvetlen kapcsolatban, másszóval nem lesz benne például közvetlen adatbázis-manipuláció.
</div>
<h3>Session beanek definíciója</h3>
<div class="paragraph">
Első körben még az adatbázissal ne foglalkozzunk, csak nézzünk egy példát a user interfész - üzleti logika (másszóval war-ejb) együttműködésre! Java EE-ben az üzleti logika Java Bean nevű komponensekből áll, amik szolgáltatásokat nyújtanak kifelé. Ezeket használhatja a user interfész. Első java beanünk az <i>Állapotnélküli Session Bean</i>. Ez tulajdonképpen egy java osztály, aminek nincsenek mezői, a metódusai pedig a kívülről elérhető szolgáltatások, azaz az <i>Üzleti metódusok</i>. Valahogy így néz ki:
</div>
<div class="code codetext"><style>.java_annotation {
color: #0050d7;  font-weight: bold;
}
.java_javadoc_comment {
color: rgb(147,147,147); font-style: italic;
}
.java_javadoc_tag {
color: rgb(147,147,147); font-style: italic; font-weight: bold;
}
.java_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_user_type {
color: #0095ff;  font-weight: bold;
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.java_type {
color: rgb(128,0,0);
}
.java_operator {
color: rgb(0,0,0);
}
.java_char_literal {
color: rgb(255,0,255);
}
.java_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.java_num_literal {
color: rgb(0,0,255);
}
.java_comment {
color: rgb(147,147,147);  
}
.java_plain {
color: rgb(0,0,0);
}
.java_string_literal {
color: rgb(255,0,0);
}
.java_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="java_annotation">@Stateless</span><span class="java_plain">&#160;&#160;&#160;&#160;&#160;</span><span class="java_comment">//ez&#160;egy&#160;annot&aacute;ci&oacute;,&#160;ez&#160;jel&ouml;li,&#160;</span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_comment">//hogy&#160;&aacute;llapotn&eacute;lk&uuml;li&#160;session&#160;beanről&#160;van&#160;sz&oacute;</span><br /><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_keyword">class</span><span class="java_plain">&#160;</span><span class="java_user_type">TestBean</span><span class="java_plain">&#160;</span><span class="java_keyword">implements</span><span class="java_plain">&#160;</span><span class="java_user_type">TestLocal</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_user_type">String</span><span class="java_plain">&#160;helloMethod</span><span class="java_separator">(</span><span class="java_user_type">String</span><span class="java_plain">&#160;name</span><span class="java_separator">)</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">return</span><span class="java_plain">&#160;</span><span class="java_string_literal">&quot;hello&#160;&quot;</span><span class="java_operator">+</span><span class="java_plain">name</span><span class="java_operator">+</span><span class="java_string_literal">&quot;!&quot;</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_separator">}</span><span class="java_plain"></span><br /></div>
<div class="paragraph">
Két megjegszés: az annotációk a Java 1.5-ben jelentek meg. Metaadatokat lehet velük kapcsolani: osztályhoz, osztály-mezőhöz vagy metódushoz. Ez a session bean önmagában még nem életképes, mert nem adtuk meg az interfészét. Ez egy Java <span class="codetext">interface</span> lesz, és ezen keresztül lehet majd elérni a beanen kívülről is a szolgáltatásait. Így néz ki:
</div>
<div class="code codetext"><style>.java_annotation {
color: #0050d7;  font-weight: bold;
}
.java_javadoc_comment {
color: rgb(147,147,147); font-style: italic;
}
.java_javadoc_tag {
color: rgb(147,147,147); font-style: italic; font-weight: bold;
}
.java_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_user_type {
color: #0095ff;  font-weight: bold;
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.java_type {
color: rgb(128,0,0);
}
.java_operator {
color: rgb(0,0,0);
}
.java_char_literal {
color: rgb(255,0,255);
}
.java_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.java_num_literal {
color: rgb(0,0,255);
}
.java_comment {
color: rgb(147,147,147);  
}
.java_plain {
color: rgb(0,0,0);
}
.java_string_literal {
color: rgb(255,0,0);
}
.java_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="java_annotation">@Local</span><span class="java_plain"></span><br /><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_keyword">interface</span><span class="java_plain">&#160;</span><span class="java_user_type">TestLocal</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_user_type">String</span><span class="java_plain">&#160;helloMethod</span><span class="java_separator">(</span><span class="java_user_type">String</span><span class="java_plain">&#160;name</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_separator">}</span><span class="java_plain"></span><br /></div>
<div class="paragraph">
A <span class="codetext">@Local</span> annotáció azt jelenti, hogy ezen az interfészen keresztül csak azonos JVM-ben futó programból lehet ezt a Session Bean-t elérni. A lényeg: az njCMS-ben mindig ezt használjuk.
</div>
<h3>Session beanek használata</h3>
<div class="paragraph">
Egy session bean-t például egy servletből lehet meghívni, így:
</div>
<div class="code codetext"><style>.java_annotation {
color: #0050d7;  font-weight: bold;
}
.java_javadoc_comment {
color: rgb(147,147,147); font-style: italic;
}
.java_javadoc_tag {
color: rgb(147,147,147); font-style: italic; font-weight: bold;
}
.java_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_user_type {
color: #0095ff;  font-weight: bold;
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.java_type {
color: rgb(128,0,0);
}
.java_operator {
color: rgb(0,0,0);
}
.java_char_literal {
color: rgb(255,0,255);
}
.java_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.java_num_literal {
color: rgb(0,0,255);
}
.java_comment {
color: rgb(147,147,147);  
}
.java_plain {
color: rgb(0,0,0);
}
.java_string_literal {
color: rgb(255,0,0);
}
.java_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_keyword">class</span><span class="java_plain">&#160;</span><span class="java_user_type">Demo1</span><span class="java_plain">&#160;</span><span class="java_keyword">extends</span><span class="java_plain">&#160;</span><span class="java_user_type">HttpServlet</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_annotation">@EJB</span><span class="java_plain">&#160;</span><span class="java_user_type">TestLocal</span><span class="java_plain">&#160;testLocal</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">protected</span><span class="java_plain">&#160;</span><span class="java_type">void</span><span class="java_plain">&#160;doGet</span><span class="java_separator">(</span><span class="java_user_type">HttpServletRequest</span><span class="java_plain">&#160;request</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">HttpServletResponse</span><span class="java_plain">&#160;response</span><span class="java_separator">)</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">throws</span><span class="java_plain">&#160;</span><span class="java_user_type">ServletException</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">IOException</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;response</span><span class="java_separator">.</span><span class="java_plain">setContentType</span><span class="java_separator">(</span><span class="java_string_literal">&quot;text/html;charset=UTF-8&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_user_type">PrintWriter</span><span class="java_plain">&#160;out&#160;</span><span class="java_operator">=</span><span class="java_plain">&#160;response</span><span class="java_separator">.</span><span class="java_plain">getWriter</span><span class="java_separator">();</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">try</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_string_literal">&quot;&lt;html&gt;&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_string_literal">&quot;&lt;body&gt;&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_plain">testLocal</span><span class="java_separator">.</span><span class="java_plain">helloMethod</span><span class="java_separator">(</span><span class="java_string_literal">&quot;Enterprise&#160;World&quot;</span><span class="java_separator">));</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_string_literal">&quot;&lt;/body&gt;&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_string_literal">&quot;&lt;/html&gt;&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain">&#160;</span><span class="java_keyword">finally</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain">&#160;</span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;out</span><span class="java_separator">.</span><span class="java_plain">close</span><span class="java_separator">();</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain">&#160;</span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">protected</span><span class="java_plain">&#160;</span><span class="java_type">void</span><span class="java_plain">&#160;doPost</span><span class="java_separator">(</span><span class="java_user_type">HttpServletRequest</span><span class="java_plain">&#160;request</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">HttpServletResponse</span><span class="java_plain">&#160;response</span><span class="java_separator">)</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">throws</span><span class="java_plain">&#160;</span><span class="java_user_type">ServletException</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">IOException</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doGet</span><span class="java_separator">(</span><span class="java_plain">request</span><span class="java_separator">,</span><span class="java_plain">&#160;response</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_separator">}</span><span class="java_plain"></span><br /></div>
<div class="paragraph">
Itt a <span class="codetext">@EJB</span> annotáción van a lényeg, és azon, hogy a session bean <i>interfészére</i> kell hivatkozni, nem pedig az implementációjára. (És a konténer - esetünkben a GlassFish - majd megkeresi ehhez az interfészhez az EJB-ben azt osztályt, amelyik implementálja.)
</div>
<h2>Entity Beanek</h2>
<div class="paragraph">
Az Entity Beanek nem szolgáltatást nyújtanak, hanem adatot tárolnak. Ráadásul perzisztens, azaz maradandó módon. Egyszerűbben: egy Entity Bean valójában egy adatbázistábla egy sorának felel meg. Így lehet csinálni egyet:
</div>
<div class="code codetext"><style>.java_annotation {
color: #0050d7;  font-weight: bold;
}
.java_javadoc_comment {
color: rgb(147,147,147); font-style: italic;
}
.java_javadoc_tag {
color: rgb(147,147,147); font-style: italic; font-weight: bold;
}
.java_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_user_type {
color: #0095ff;  font-weight: bold;
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.java_type {
color: rgb(128,0,0);
}
.java_operator {
color: rgb(0,0,0);
}
.java_char_literal {
color: rgb(255,0,255);
}
.java_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.java_num_literal {
color: rgb(0,0,255);
}
.java_comment {
color: rgb(147,147,147);  
}
.java_plain {
color: rgb(0,0,0);
}
.java_string_literal {
color: rgb(255,0,0);
}
.java_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="java_annotation">@Entity</span><span class="java_plain"></span><br /><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_keyword">class</span><span class="java_plain">&#160;</span><span class="java_user_type">Semmi</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_annotation">@Id</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_annotation">@GeneratedValue</span><span class="java_separator">(</span><span class="java_plain">strategy</span><span class="java_operator">=</span><span class="java_user_type">GenerationType</span><span class="java_separator">.</span><span class="java_plain">AUTO</span><span class="java_separator">)</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">private</span><span class="java_plain">&#160;</span><span class="java_user_type">Long</span><span class="java_plain">&#160;id</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">private</span><span class="java_plain">&#160;</span><span class="java_user_type">String</span><span class="java_plain">&#160;name</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">private</span><span class="java_plain">&#160;</span><span class="java_user_type">Long</span><span class="java_plain">&#160;val</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_user_type">Long</span><span class="java_plain">&#160;getId</span><span class="java_separator">()</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">return</span><span class="java_plain">&#160;id</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_type">void</span><span class="java_plain">&#160;setId</span><span class="java_separator">(</span><span class="java_user_type">Long</span><span class="java_plain">&#160;id</span><span class="java_separator">)</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&#160;</span><span class="java_operator">=</span><span class="java_plain">&#160;id</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_user_type">String</span><span class="java_plain">&#160;getName</span><span class="java_separator">()</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">return</span><span class="java_plain">&#160;name</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_type">void</span><span class="java_plain">&#160;setName</span><span class="java_separator">(</span><span class="java_user_type">String</span><span class="java_plain">&#160;name</span><span class="java_separator">)</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">name&#160;</span><span class="java_operator">=</span><span class="java_plain">&#160;name</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_user_type">Long</span><span class="java_plain">&#160;getVal</span><span class="java_separator">()</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">return</span><span class="java_plain">&#160;val</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_type">void</span><span class="java_plain">&#160;setVal</span><span class="java_separator">(</span><span class="java_user_type">Long</span><span class="java_plain">&#160;val</span><span class="java_separator">)</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">val&#160;</span><span class="java_operator">=</span><span class="java_plain">&#160;val</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_separator">}</span><span class="java_plain"></span><br /></div>
<div class="paragraph">
Ez például a "Semmi" nevű adatbázistáblát írja le. Ennek három oszlopa lesz, Id, Name és Value. Valamilyen egyedi azonosítónak mindig kell lennie, és azt mindig a <span class="codetext">@Id</span> annotáció jelzi. A "Semmi" nevű adatbázistábla sorai pedig ennek az osztálynak a példányainak felelnek meg. A táblát manipulálni csak az üzleti logikában, azaz az ejb projekt fájljaiban lehet. Ráadásul azon belül is csak bizonyos helyeken. Például session beanekben:
</div>
<div class="code codetext"><style>.java_annotation {
color: #0050d7;  font-weight: bold;
}
.java_javadoc_comment {
color: rgb(147,147,147); font-style: italic;
}
.java_javadoc_tag {
color: rgb(147,147,147); font-style: italic; font-weight: bold;
}
.java_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_user_type {
color: #0095ff;  font-weight: bold;
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.java_type {
color: rgb(128,0,0);
}
.java_operator {
color: rgb(0,0,0);
}
.java_char_literal {
color: rgb(255,0,255);
}
.java_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.java_num_literal {
color: rgb(0,0,255);
}
.java_comment {
color: rgb(147,147,147);  
}
.java_plain {
color: rgb(0,0,0);
}
.java_string_literal {
color: rgb(255,0,0);
}
.java_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="java_annotation">@Local</span><span class="java_plain"></span><br /><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_keyword">interface</span><span class="java_plain">&#160;</span><span class="java_user_type">TestLocal</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_user_type">String</span><span class="java_plain">&#160;helloMethod</span><span class="java_separator">(</span><span class="java_user_type">String</span><span class="java_plain">&#160;name</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_type">void</span><span class="java_plain">&#160;createSemmi</span><span class="java_separator">(</span><span class="java_user_type">String</span><span class="java_plain">&#160;name</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">Long</span><span class="java_plain">&#160;value</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_user_type">List</span><span class="java_operator">&lt;</span><span class="java_user_type">Semmi</span><span class="java_operator">&gt;</span><span class="java_plain">&#160;allSemmi</span><span class="java_separator">();</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><br /><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_annotation">@Stateless</span><span class="java_plain"></span><br /><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_keyword">class</span><span class="java_plain">&#160;</span><span class="java_user_type">TestBean</span><span class="java_plain">&#160;</span><span class="java_keyword">implements</span><span class="java_plain">&#160;</span><span class="java_user_type">TestLocal</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_annotation">@PersistenceContext</span><span class="java_plain">&#160;</span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_user_type">EntityManager</span><span class="java_plain">&#160;em</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_user_type">String</span><span class="java_plain">&#160;helloMethod</span><span class="java_separator">(</span><span class="java_user_type">String</span><span class="java_plain">&#160;name</span><span class="java_separator">)</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">return</span><span class="java_plain">&#160;</span><span class="java_string_literal">&quot;hello&#160;&quot;</span><span class="java_operator">+</span><span class="java_plain">name</span><span class="java_operator">+</span><span class="java_string_literal">&quot;!&quot;</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_type">void</span><span class="java_plain">&#160;createSemmi</span><span class="java_separator">(</span><span class="java_user_type">String</span><span class="java_plain">&#160;name</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">Long</span><span class="java_plain">&#160;value</span><span class="java_separator">)</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_user_type">Semmi</span><span class="java_plain">&#160;s&#160;</span><span class="java_operator">=</span><span class="java_plain">&#160;</span><span class="java_keyword">new</span><span class="java_plain">&#160;</span><span class="java_user_type">Semmi</span><span class="java_separator">();</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s</span><span class="java_separator">.</span><span class="java_plain">setName</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s</span><span class="java_separator">.</span><span class="java_plain">setVal</span><span class="java_separator">(</span><span class="java_plain">value</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;em</span><span class="java_separator">.</span><span class="java_plain">persist</span><span class="java_separator">(</span><span class="java_plain">s</span><span class="java_separator">);</span><span class="java_plain">&#160;&#160;&#160;</span><span class="java_comment">//besz&uacute;r&aacute;s&#160;az&#160;adatb&aacute;zisba</span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_user_type">List</span><span class="java_operator">&lt;</span><span class="java_user_type">Semmi</span><span class="java_operator">&gt;</span><span class="java_plain">&#160;allSemmi</span><span class="java_separator">()</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">return</span><span class="java_plain">&#160;em</span><span class="java_separator">.</span><span class="java_plain">createNamedQuery</span><span class="java_separator">(</span><span class="java_string_literal">&quot;allSemmiQuery&quot;</span><span class="java_separator">).</span><span class="java_plain">getResultList</span><span class="java_separator">();</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_separator">}</span><span class="java_plain"></span><br /></div>
<div class="paragraph">
Ez természetesen két fájl. Az entitásokat egy EntityManager típusú objektum szolgáltatásaival tudjuk manipulálni. Ez ugyan egy tagváltozója az állapotnélküli Session Bean-nek, de az előtte lévő annotáció jelzi, hogy az értékét a konténer fogja beállítani. Paraméterként sose adjuk át, mindig helyileg definiáljuk!
</div>
<div class="paragraph">
Az allSemmi metódus visszatérési értéke az adatbázisban lévő összes Semmi objektum listája. (Ez kiadható a web-rétegnek, de ekkor a lista elemei lecsatolódnak, vagyis a rajtuk végzett módosítások már nem kerülnek vissza az adatbázisba.) Visszatérve a metódus tartalmához, ahhoz, hogy ez működjön, definiálni kell még az "allSemmiQuery" nevű lekérdezést, amit itt most meghívunk. Ennek a nyelve az SQL-hez hasonló EJB-QL és a definíció módja:
</div>
<div class="code codetext"><style>.java_annotation {
color: #0050d7;  font-weight: bold;
}
.java_javadoc_comment {
color: rgb(147,147,147); font-style: italic;
}
.java_javadoc_tag {
color: rgb(147,147,147); font-style: italic; font-weight: bold;
}
.java_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_user_type {
color: #0095ff;  font-weight: bold;
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.java_type {
color: rgb(128,0,0);
}
.java_operator {
color: rgb(0,0,0);
}
.java_char_literal {
color: rgb(255,0,255);
}
.java_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.java_num_literal {
color: rgb(0,0,255);
}
.java_comment {
color: rgb(147,147,147);  
}
.java_plain {
color: rgb(0,0,0);
}
.java_string_literal {
color: rgb(255,0,0);
}
.java_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="java_annotation">@NamedQuery</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_string_literal">&quot;allSemmiQuery&quot;</span><span class="java_separator">,</span><span class="java_plain">&#160;query</span><span class="java_operator">=</span><span class="java_string_literal">&quot;SELECT&#160;s&#160;FROM&#160;Semmi&#160;s&quot;</span><span class="java_separator">)</span><span class="java_plain"></span><br /></div>
<div class="paragraph">
Ha még emlékszel, akkor az elején azt mondtam, hogy annotációt csak osztály, metódus, vagy mező elé lehet rakni, másszóval mindig kell valami amit annotál. A NamedQuery-ket  entitások elé kell rakni. (De nem számít melyik elé.)
</div>
<div class="code codetext"><style>.java_annotation {
color: #0050d7;  font-weight: bold;
}
.java_javadoc_comment {
color: rgb(147,147,147); font-style: italic;
}
.java_javadoc_tag {
color: rgb(147,147,147); font-style: italic; font-weight: bold;
}
.java_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_user_type {
color: #0095ff;  font-weight: bold;
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.java_type {
color: rgb(128,0,0);
}
.java_operator {
color: rgb(0,0,0);
}
.java_char_literal {
color: rgb(255,0,255);
}
.java_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.java_num_literal {
color: rgb(0,0,255);
}
.java_comment {
color: rgb(147,147,147);  
}
.java_plain {
color: rgb(0,0,0);
}
.java_string_literal {
color: rgb(255,0,0);
}
.java_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="java_annotation">@Emtity</span><span class="java_plain"></span><br /><span class="java_annotation">@NamedQuery</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_string_literal">&quot;allSemmiQuery&quot;</span><span class="java_separator">,</span><span class="java_plain">&#160;query</span><span class="java_operator">=</span><span class="java_string_literal">&quot;SELECT&#160;s&#160;FROM&#160;Semmi&#160;s&quot;</span><span class="java_separator">)</span><span class="java_plain"></span><br /><span class="java_keyword">class</span><span class="java_plain">&#160;</span><span class="java_user_type">Semmi</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">...</span><span class="java_plain"></span><br /></div>
<div class="paragraph">
Mindez egy servletből egyszerűen meghívható. És ez a példa egyben bemutatja az njCMS-ben (és széleskörűen) használt Servlet-JSP konvenciót:
</div>
<div class="code codetext"><style>.java_annotation {
color: #0050d7;  font-weight: bold;
}
.java_javadoc_comment {
color: rgb(147,147,147); font-style: italic;
}
.java_javadoc_tag {
color: rgb(147,147,147); font-style: italic; font-weight: bold;
}
.java_other_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_user_type {
color: #0095ff;  font-weight: bold;
}
.java_keyword {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_char_literal {
color: rgb(255,0,255); font-weight: bold;
}
.java_type {
color: rgb(128,0,0);
}
.java_operator {
color: rgb(0,0,0);
}
.java_char_literal {
color: rgb(255,0,255);
}
.java_bool_literal {
color: rgb(0,0,0); font-weight: bold;
}
.java_esc_string_literal {
color: rgb(255,0,0); font-weight: bold;
}
.java_num_literal {
color: rgb(0,0,255);
}
.java_comment {
color: rgb(147,147,147);  
}
.java_plain {
color: rgb(0,0,0);
}
.java_string_literal {
color: rgb(255,0,0);
}
.java_separator {
color: rgb(0,0,0);
}
</style><!--  : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><span class="java_keyword">public</span><span class="java_plain">&#160;</span><span class="java_keyword">class</span><span class="java_plain">&#160;</span><span class="java_user_type">Demo2</span><span class="java_plain">&#160;</span><span class="java_keyword">extends</span><span class="java_plain">&#160;</span><span class="java_user_type">HttpServlet</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_annotation">@EJB</span><span class="java_plain">&#160;</span><span class="java_user_type">TestLocal</span><span class="java_plain">&#160;testLocal</span><span class="java_separator">;</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">protected</span><span class="java_plain">&#160;</span><span class="java_type">void</span><span class="java_plain">&#160;doGet</span><span class="java_separator">(</span><span class="java_user_type">HttpServletRequest</span><span class="java_plain">&#160;request</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">HttpServletResponse</span><span class="java_plain">&#160;response</span><span class="java_separator">)</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">throws</span><span class="java_plain">&#160;</span><span class="java_user_type">ServletException</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">IOException</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_user_type">String</span><span class="java_plain">&#160;name&#160;</span><span class="java_operator">=</span><span class="java_plain">&#160;request</span><span class="java_separator">.</span><span class="java_plain">getParameter</span><span class="java_separator">(</span><span class="java_string_literal">&quot;name&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_user_type">String</span><span class="java_plain">&#160;value0&#160;</span><span class="java_operator">=</span><span class="java_plain">&#160;request</span><span class="java_separator">.</span><span class="java_plain">getParameter</span><span class="java_separator">(</span><span class="java_string_literal">&quot;value&quot;</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_keyword">if</span><span class="java_plain">&#160;</span><span class="java_separator">(</span><span class="java_plain">name&#160;</span><span class="java_operator">!=</span><span class="java_plain">&#160;</span><span class="java_other_literal">null</span><span class="java_plain">&#160;</span><span class="java_operator">&amp;&amp;</span><span class="java_plain">&#160;value0&#160;</span><span class="java_operator">!=</span><span class="java_plain">&#160;</span><span class="java_other_literal">null</span><span class="java_separator">)</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_user_type">Long</span><span class="java_plain">&#160;value&#160;</span><span class="java_operator">=</span><span class="java_plain">&#160;</span><span class="java_user_type">Long</span><span class="java_separator">.</span><span class="java_plain">parseLong</span><span class="java_separator">(</span><span class="java_plain">value0</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;testLocal</span><span class="java_separator">.</span><span class="java_plain">createSemmi</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_separator">,</span><span class="java_plain">&#160;value</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</span><span class="java_user_type">List</span><span class="java_operator">&lt;</span><span class="java_user_type">Semmi</span><span class="java_operator">&gt;</span><span class="java_plain">&#160;sl&#160;</span><span class="java_operator">=</span><span class="java_plain">&#160;testLocal</span><span class="java_separator">.</span><span class="java_plain">allSemmi</span><span class="java_separator">();</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;request</span><span class="java_separator">.</span><span class="java_plain">setAttribute</span><span class="java_separator">(</span><span class="java_string_literal">&quot;sl&quot;</span><span class="java_separator">,</span><span class="java_plain">&#160;sl</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;request</span><span class="java_separator">.</span><span class="java_plain">getRequestDispatcher</span><span class="java_separator">(</span><span class="java_string_literal">&quot;/demo2.jsp&quot;</span><span class="java_separator">).</span><span class="java_plain">forward</span><span class="java_separator">(</span><span class="java_plain">request</span><span class="java_separator">,</span><span class="java_plain">&#160;response</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain">&#160;</span><br /><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">protected</span><span class="java_plain">&#160;</span><span class="java_type">void</span><span class="java_plain">&#160;doPost</span><span class="java_separator">(</span><span class="java_user_type">HttpServletRequest</span><span class="java_plain">&#160;request</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">HttpServletResponse</span><span class="java_plain">&#160;response</span><span class="java_separator">)</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_keyword">throws</span><span class="java_plain">&#160;</span><span class="java_user_type">ServletException</span><span class="java_separator">,</span><span class="java_plain">&#160;</span><span class="java_user_type">IOException</span><span class="java_plain">&#160;</span><span class="java_separator">{</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doGet</span><span class="java_separator">(</span><span class="java_plain">request</span><span class="java_separator">,</span><span class="java_plain">&#160;response</span><span class="java_separator">);</span><span class="java_plain"></span><br /><span class="java_plain">&#160;&#160;&#160;&#160;</span><span class="java_separator">}</span><span class="java_plain"></span><br /><span class="java_separator">}</span><span class="java_plain"></span><br /></div>
<div class="paragraph">
Tehát ez a Servlet ha kap megfelelő paramétereket akkor létrehoz egy Semmit, utána pedig minden esetben lekéri a Semmik listáját, majd lefuttatja az utolsó két, misztikus sorát. Ezek valójában csak a kimenő html-t generálják le a meglévő adatok birtokában, néhány out.println() és egy ciklus ugyanezt valósítaná meg. Ebben az esetben viszont egy jsp fájl végzi a html generálását, ami szebb. (JSP-ben körülményes session-beant hívni. És ez azért is jó, mert még egy szinten szétválasztjuk a megjelenítést és az adatfeldolgozást.) A JSP-ben még azt figyeld meg, hogy kerüljük a <span class="codetext">&lt;% ... %&gt;</span> típusú beszúrt kódokat:
</div>
<div class="code codetext">&lt;%@taglib&nbsp;prefix="c"&nbsp;uri="http://java.sun.com/jsp/jstl/core"%&gt;<br />&lt;%@page&nbsp;contentType="text/html"&nbsp;pageEncoding="UTF-8"%&gt;<br /><br />&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;"-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN"<br />&nbsp;&nbsp;&nbsp;"http://www.w3.org/TR/html4/loose.dtd"&gt;<br /><br />&lt;html&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;action="Demo2"&nbsp;method="post"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&lt;input&nbsp;type="text"&nbsp;name="name"&gt;&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;&lt;input&nbsp;type="text"&nbsp;name="value"&gt;&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;value="Létrehoz"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;c:forEach&nbsp;items="${sl}"&nbsp;var="semmi"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=&nbsp;${semmi.name},&nbsp;value=&nbsp;${semmi.val}&nbsp;&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/c:forEach&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br />&lt;/html&gt;</div>
<div class="paragraph">
Az <span class="codetext">sl</span> változó azért érhető el, mert beállítottuk <span class="codetext">setAttribute</span>-el.
</div>

                        
                        
                    

            
        
    </div>
</div>
    
    

                
                
            
        
    
</div> <!-- rightbase -->
<div id="copyright">
    
        A dokumentum tulajdonosa: Feh&eacute;r G&aacute;bor;
        utolsó módosítás:
        2009-11-07 23:20:37
        (Feh&eacute;r G&aacute;bor)
        <br />
    

        (C) 2004-2010
    <a href="../contr.html" class="copyright">BDG programozás szakkör</a>
    <br /> 
    Powered by 
    <a href="../contr.html" class="copyright">BDG programozás szakkör</a> &amp;
    <a href="../njcms.html" class="copyright">njcms</a>

    v0.5.12
    
        <br /><br />
        <a href="http://validator.w3.org/check?uri=referer">
            <img src="../../../../img/valid-xhtml10-blue.png" alt="Valid XHTML 1.0 Transitional" height="31" width="88" />
        </a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer">
            <img style="border: 0pt none ; width: 88px; height: 31px;" src="../../../../img/valid-css-blue.png" alt="Valid CSS!" />
        </a>
        <br />
     
    
    
    <br /><br />


</div>
                </div>
            
        

    </body>

<!-- Mirrored from prog.berzsenyi.hu:8080/prog/View/doku/info/njcms/javaee?page=list by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 08 Aug 2012 06:25:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>
